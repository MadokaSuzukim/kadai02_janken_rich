<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¾¡å€¤è¦³åˆã†åˆã‚ãªã„ï¼ï¼Ÿã‚²ãƒ¼ãƒ </title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div align="center">
        <!-- ã‚²ãƒ¼ãƒ ã®ã‚¿ã‚¤ãƒˆãƒ« -->
        <h2>ä¾¡å€¤è¦³åˆã†åˆã‚ãªã„ï¼ï¼Ÿã‚²ãƒ¼ãƒ </h2>
        <!-- ã‚²ãƒ¼ãƒ ã®èª¬æ˜ -->
        ã€Œã‚¹ã‚¿ãƒ¼ãƒˆã€ã‚’æŠ¼ã—ãŸå¾Œã«ã€
        <br>ä»Šã®å¿ƒã®èª¿å­ã‚’ã€ŒğŸ˜ã€ã€ŒğŸ˜€ã€ã€ŒğŸ˜‚ã€ï¼“ã¤ã®ã‚¹ã‚¿ãƒ³ãƒ—ã‹ã‚‰é¸ã‚“ã§ã­ã€‚<br>
        <br>ç›¸æ‰‹ã®æ„Ÿæƒ…ã¯èª­ã‚ã¾ã›ã‚“ã€‚ã‚ãªãŸã®ä»Šã®çŠ¶æ…‹ã‚’æ•™ãˆã¦ãã ã•ã„ã€‚<br>
        <br>
        <!-- ã‚¹ã‚¿ãƒ¼ãƒˆãƒœã‚¿ãƒ³ -->
        <button id="startButton" onclick="start();">ã‚¹ã‚¿ãƒ¼ãƒˆ</button>
        <!-- ã‚¹ãƒã‚¤ãƒ«ãƒœã‚¿ãƒ³ï¼ˆç„¡åŠ¹çŠ¶æ…‹ã‹ã‚‰é–‹å§‹ï¼‰ -->
        <button id="smailButton" onclick="janken('ğŸ˜');" disabled>ğŸ˜</button>
        <!-- ãƒãƒ¼ãƒãƒ«ãƒœã‚¿ãƒ³ï¼ˆç„¡åŠ¹çŠ¶æ…‹ã‹ã‚‰é–‹å§‹ï¼‰ -->
        <button id="nomalButton" onclick="janken('ğŸ˜€');" disabled>ğŸ˜€</button>
        <!-- æ³£ãé¡”ãƒœã‚¿ãƒ³ï¼ˆç„¡åŠ¹çŠ¶æ…‹ã‹ã‚‰é–‹å§‹ï¼‰ -->
        <button id="butButton" onclick="janken('ğŸ˜‚');" disabled>ğŸ˜‚</button>
        <br>
        <!-- ã‚²ãƒ¼ãƒ çµæœã‚’è¡¨ç¤ºã™ã‚‹ãƒ†ãƒ¼ãƒ–ãƒ« -->
        <table border="1" style="border-collapse: collapse">
            <tr>
                <!-- ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®é¸æŠã—ãŸæ„Ÿæƒ… -->
                <td align="center"><h2>è²´æ–¹ã®æ„Ÿæƒ… <div id="PlayerHand"> </div></h2></td>
                <!-- ç›¸æ‰‹ã®æ„Ÿæƒ… -->
                <td align="center"><h2>ç›¸æ‰‹ã®æ„Ÿæƒ… <div id="RivalHand"> </div></h2></td>
            </tr>
            <br>ä½•ã‚’é¸ã‚“ã§ã‚‚ã€æ­£è§£ä¸æ­£è§£ã¯ã‚ã‚Šã¾ã›ã‚“
        </table>
        <br>
        <!-- ã‚²ãƒ¼ãƒ ã®çµæœè¡¨ç¤º -->
        <div id="Result"></div>
    </div>

    <!-- ãƒ¢ãƒ¼ãƒ€ãƒ«ã®HTMLæ§‹é€  -->
    <!-- ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã¨ã¯ã€Webã‚µã‚¤ãƒˆã‚„ã‚¢ãƒ—ãƒªã®æœ€å‰é¢ã«è¡¨ç¤ºã•ã‚Œã€è¦æ±‚ã•ã‚Œã‚‹æ“ä½œã‚’è¡Œã‚ãªã„é™ã‚Šæ¶ˆãˆãªã„è¦ç´ ã®ã“ã¨ -->
    <div id="resultModal" class="modal">
        <div class="modal-content">
            <!-- ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã‚‹ãƒœã‚¿ãƒ³ -->
            <span class="close-button">&times;</span>
            <!-- ãƒ¢ãƒ¼ãƒ€ãƒ«ã®ãƒ†ã‚­ã‚¹ãƒˆ -->
            <p id="modalText"></p>
            <!-- å†ãƒˆãƒ©ã‚¤ãƒœã‚¿ãƒ³ -->
            <button id="retryButton">å†ãƒˆãƒ©ã‚¤</button>
            <!-- å¤–éƒ¨ãƒªãƒ³ã‚¯ -->
            <a href="https://marumark-98145.bubbleapps.io/signin" target="_blank" class="marumark-button">Marumark</a>
        </div>
    </div>

    <script>
        // å®šæ•°ã¨å¤‰æ•°ã®å®šç¾©
        // ç›¸æ‰‹ã®çµµæ–‡å­—ãŒå¤‰ã‚ã‚Šç¶šã‘ã‚‹å‹•ã
        // Unicode
        const FPS = 30; // ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¬ãƒ¼ãƒˆ
        const HANDS = ['ğŸ˜', 'ğŸ˜€', 'ğŸ˜‚']; // æ‰‹ã®é¸æŠè‚¢
        let lastRivalHandIndex = 0; // ç›¸æ‰‹ã®æœ€å¾Œã®æ‰‹ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
        let gameLoopInterbalId = null; // ã‚²ãƒ¼ãƒ ãƒ«ãƒ¼ãƒ—ã®ID

        // ã‚²ãƒ¼ãƒ ãƒ«ãƒ¼ãƒ—é–¢æ•°
        function gameLoop() {
            const handIndex = (lastRivalHandIndex + 1) % HANDS.length;
            lastRivalHandIndex = handIndex;
            document.getElementById("RivalHand").innerHTML = HANDS[handIndex];
        }

        // ã‚²ãƒ¼ãƒ ã‚’é–‹å§‹ã™ã‚‹é–¢æ•°
        function start() {
            document.getElementById("startButton").disabled = true;
            document.getElementById("smailButton").disabled = false;
            document.getElementById("nomalButton").disabled = false;
            document.getElementById("butButton").disabled = false;
            document.getElementById("PlayerHand").innerHTML = ' ';
            document.getElementById("Result").innerHTML = '';
            gameLoopInterbalId = setInterval(gameLoop, 1000 / FPS);
        }

        // ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’è¡¨ç¤ºã™ã‚‹é–¢æ•°
        function showModal(result) {
            var modal = document.getElementById('resultModal');
            var modalText = document.getElementById('modalText');
            modalText.innerHTML = result;
            modal.style.display = 'block';

            var closeButton = document.getElementsByClassName('close-button')[0];
            closeButton.onclick = function() {
                modal.style.display = 'none';
            }

            // å†ãƒˆãƒ©ã‚¤ãƒœã‚¿ãƒ³ã®ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆ
            retryButton.onclick = function() {
                modal.style.display = 'none'; // ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã‚‹
                start(); // ã‚²ãƒ¼ãƒ ã‚’å†ã‚¹ã‚¿ãƒ¼ãƒˆ
            }

            window.onclick = function(event) {
                if (event.target == modal) {
                    modal.style.display = 'none';
                }
            }
        }

        // ã˜ã‚ƒã‚“ã‘ã‚“ã‚’å®Ÿè¡Œã™ã‚‹é–¢æ•°
        function janken(playerHand) {
            clearInterval(gameLoopInterbalId);

            document.getElementById("PlayerHand").innerHTML = playerHand;

            const rivalHand = HANDS[lastRivalHandIndex];
            let result = "";

            // çµæœã®åˆ¤å®šãƒ­ã‚¸ãƒƒã‚¯
            // ï¼ˆã“ã“ã«ã¯å„æ¡ä»¶ã«ã‚ˆã‚‹çµæœã®åˆ¤å®šãŒè¨˜è¿°ã•ã‚Œã¦ã„ã¾ã™ï¼‰

            showModal(result); // çµæœã‚’ãƒ¢ãƒ¼ãƒ€ãƒ«ã§è¡¨ç¤º

            // ãƒœã‚¿ãƒ³ã®çŠ¶æ…‹ã‚’ãƒªã‚»ãƒƒãƒˆ
            document.getElementById("startButton").disabled = false;
            document.getElementById("smailButton").disabled = true;
            document.getElementById("nomalButton").disabled = true;
            document.getElementById("butButton").disabled = true;
        }
    </script>
</body>
</html>

